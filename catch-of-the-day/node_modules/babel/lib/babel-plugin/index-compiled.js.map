{"version":3,"sources":["index.js"],"names":[],"mappings":"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","file":"index-compiled.js","sourcesContent":["\"use strict\";\n\n// istanbul ignore next\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nvar _pathExists = require(\"path-exists\");\n\nvar _pathExists2 = _interopRequireDefault(_pathExists);\n\nvar _readline = require(\"readline\");\n\nvar _readline2 = _interopRequireDefault(_readline);\n\nvar _child_process = require(\"child_process\");\n\nvar _child_process2 = _interopRequireDefault(_child_process);\n\nvar _path = require(\"path\");\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _fs = require(\"fs\");\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nfunction spawn(cmd, args, callback) {\n  console.log(\">\", cmd, args);\n\n  var spawn = _child_process2[\"default\"].spawn(cmd, args, { stdio: \"inherit\" });\n\n  spawn.on(\"exit\", function (code) {\n    if (code === 0) {\n      callback();\n    } else {\n      console.log(\"Killing...\");\n      process.exit(1);\n    }\n  });\n}\n\nfunction spawnMultiple(cmds) {\n  function next() {\n    var cmd = cmds.shift();\n    if (cmd) {\n      spawn(cmd.command, cmd.args, next);\n    } else {\n      process.exit();\n    }\n  }\n\n  next();\n}\n\nfunction template(name) {\n  var data = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n  var source = _fs2[\"default\"].readFileSync(_path2[\"default\"].join(__dirname, \"templates\", name), \"utf8\");\n  source = source.replace(/[A-Z_]+/g, function (key) {\n    return data[key] === undefined ? key : data[key];\n  });\n  return source;\n}\n\nfunction write(filename, content) {\n  console.log(filename);\n  _fs2[\"default\"].writeFileSync(filename, content);\n}\n\nfunction execMaybe(cmd) {\n  try {\n    return _child_process2[\"default\"].execSync(cmd).toString();\n  } catch (err) {\n    return \"\";\n  }\n}\n\nvar rl = _readline2[\"default\"].createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nvar BABEL_PLUGIN_PREFIX = \"babel-plugin-\";\n\nvar cmds = {\n  init: function init() {\n    var name = _path2[\"default\"].basename(process.cwd());\n\n    if (name.indexOf(BABEL_PLUGIN_PREFIX) === 0) {\n      name = name.slice(BABEL_PLUGIN_PREFIX.length);\n    }\n\n    rl.question(\"Description (optional): \", function (description) {\n      var remote = execMaybe(\"git config --get remote.origin.url\").trim().match(/git@github.com:(.*?).git/);\n      if (remote) {\n        build(description, remote[1]);\n      } else {\n        rl.question(\"GitHub Repository (eg. sebmck/babel-plugin-foobar) (optional): \", function (repo) {\n          build(description, repo);\n        });\n      }\n    });\n\n    function build(description, repo) {\n      rl.close();\n\n      var templateData = {\n        DESCRIPTION: description,\n        FULL_NAME: BABEL_PLUGIN_PREFIX + name,\n        NAME: name\n      };\n\n      write(\"package.json\", JSON.stringify({\n        name: templateData.FULL_NAME,\n        version: \"1.0.0\",\n        description: templateData.DESCRIPTION,\n        repository: repo || undefined,\n        license: \"MIT\",\n        main: \"lib/index.js\",\n\n        devDependencies: {\n          babel: \"^5.6.0\"\n        },\n\n        scripts: {\n          build: \"babel-plugin build\",\n          push: \"babel-plugin publish\",\n          test: \"babel-plugin test\"\n        },\n\n        keywords: [\"babel-plugin\"]\n      }, null, \"  \") + \"\\n\");\n\n      write(\".npmignore\", \"node_modules\\n*.log\\nsrc\\n\");\n\n      write(\".gitignore\", \"node_modules\\n*.log\\nlib\\n\");\n\n      write(\"README.md\", template(\"README.md\", templateData));\n\n      write(\"LICENSE\", template(\"LICENSE\", {\n        AUTHOR_EMAIL: execMaybe(\"git config --get user.email\").trim(),\n        AUTHOR_NAME: execMaybe(\"git config --get user.name\").trim(),\n        YEAR: new Date().getFullYear()\n      }));\n\n      if (!_pathExists2[\"default\"].sync(\"src\")) {\n        _fs2[\"default\"].mkdirSync(\"src\");\n        write(\"src/index.js\", template(\"index.js\", templateData));\n      }\n    }\n  },\n\n  build: function build() {\n    spawn(\"babel\", [\"src\", \"--out-dir\", \"lib\", \"--copy-files\"], process.exit);\n  },\n\n  publish: function publish() {\n    var pkg = require(process.cwd() + \"/package.json\");\n    console.log(\"Current version:\", pkg.version);\n\n    rl.question(\"New version (enter nothing for patch): \", function (newVersion) {\n      rl.close();\n\n      newVersion = newVersion || \"patch\";\n\n      spawnMultiple([{ command: \"git\", args: [\"pull\"] }, { command: \"git\", args: [\"push\"] }, { command: \"babel-plugin\", args: [\"build\"] }, { command: \"npm\", args: [\"version\", newVersion] }, { command: \"npm\", args: [\"publish\"] }, { command: \"git\", args: [\"push\", \"--follow-tags\"] }]);\n    });\n  }\n};\n\nvar cmd = cmds[process.argv[2]];\nif (cmd) {\n  cmd();\n} else {\n  console.error(\"Unknown command:\", cmd);\n  process.exit(1);\n}"]}