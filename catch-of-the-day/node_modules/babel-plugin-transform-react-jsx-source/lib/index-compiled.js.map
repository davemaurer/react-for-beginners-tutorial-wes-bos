{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA,wBAAwB;;AAExB,QAAQ,UAAR,GAAqB,IAArB;;AAEA,QAAQ,OAAR,GAAkB,WAAW,wBAAwB,IAAnC,EAAyC;AACzD,0BAAwB,IAAI,IAAI,KAAK,KAAb;;AAExB,WAAS,SAAT,CAAmB,kBAAnB,EAAuC,UAAvC,EAAmD;AACjD,QAAI,kBAAkB,cAAc,IAAd,GAAqB,EAAE,cAAF,CAAiB,UAAjB,CAArB,GAAoD,EAAE,WAAF,EAA1E;AACA,QAAI,mBAAmB,EAAE,cAAF,CAAiB,EAAE,UAAF,CAAa,UAAb,CAAjB,EAA2C,kBAA3C,CAAvB;AACA,QAAI,qBAAqB,EAAE,cAAF,CAAiB,EAAE,UAAF,CAAa,YAAb,CAAjB,EAA6C,eAA7C,CAAzB;AACA,WAAO,EAAE,gBAAF,CAAmB,CAAC,gBAAD,EAAmB,kBAAnB,CAAnB,CAAP;AACD;;AAED,MAAI,UAAU,EAAE;AACd,uBAAmB,SAAS,iBAAT,CAA2B,IAA3B,EAAiC,KAAjC,EAAwC;AACzD,UAAI,KAAK,EAAE,aAAF,CAAgB,QAAhB,CAAT;AACA,UAAI,WAAW,KAAK,SAAL,CAAe,cAAf,CAA8B,GAA7C;AACA,UAAI,CAAC,QAAL,EAAe;AACb;AACA;AACD;;AAED,UAAI,aAAa,KAAK,SAAL,CAAe,cAAf,CAA8B,UAA/C;AACA,WAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,WAAW,MAA/B,EAAuC,GAAvC,EAA4C;AAC1C,YAAI,OAAO,WAAW,CAAX,EAAc,IAAzB;AACA,YAAI,QAAQ,KAAK,IAAL,KAAc,QAA1B,EAAoC;AAClC;AACA;AACD;AACF;;AAED,UAAI,CAAC,MAAM,kBAAX,EAA+B;AAC7B,YAAI,WAAW,MAAM,IAAN,CAAW,GAAX,CAAe,QAAf,KAA4B,SAA5B,GAAwC,MAAM,IAAN,CAAW,GAAX,CAAe,QAAvD,GAAkE,IAAjF;;AAEA,YAAI,qBAAqB,KAAK,KAAL,CAAW,qBAAX,CAAiC,aAAjC,CAAzB;AACA,aAAK,GAAL,CAAS,IAAT,CAAc,KAAd,CAAoB,IAApB,CAAyB,EAAE,IAAI,kBAAN,EAA0B,MAAM,EAAE,aAAF,CAAgB,QAAhB,CAAhC,EAAzB;AACA,cAAM,kBAAN,GAA2B,kBAA3B;AACD;;AAED,UAAI,QAAQ,UAAU,MAAM,kBAAhB,EAAoC,SAAS,KAAT,CAAe,IAAnD,CAAZ;AACA,iBAAW,IAAX,CAAgB,EAAE,YAAF,CAAe,EAAf,EAAmB,EAAE,sBAAF,CAAyB,KAAzB,CAAnB,CAAhB;AACD;AA5BW,GAAd;;AA+BA,SAAO;AACL,aAAS;AADJ,GAAP;AAGD,CA5CD;;AA8CA;;;;;;;;;;;;;;;AAeA,IAAI,WAAW,UAAf;AACA,IAAI,gBAAgB,cAApB;;AAEA,wBAAwB,OAAO,OAAP,GAAiB,QAAQ,SAAR,CAAjB","file":"index-compiled.js","sourcesContent":["/*istanbul ignore next*/\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function ( /*istanbul ignore next*/_ref) {\n  /*istanbul ignore next*/var t = _ref.types;\n\n  function makeTrace(fileNameIdentifier, lineNumber) {\n    var fileLineLiteral = lineNumber != null ? t.numericLiteral(lineNumber) : t.nullLiteral();\n    var fileNameProperty = t.objectProperty(t.identifier(\"fileName\"), fileNameIdentifier);\n    var lineNumberProperty = t.objectProperty(t.identifier(\"lineNumber\"), fileLineLiteral);\n    return t.objectExpression([fileNameProperty, lineNumberProperty]);\n  }\n\n  var visitor = { /*istanbul ignore next*/\n    JSXOpeningElement: function JSXOpeningElement(path, state) {\n      var id = t.jSXIdentifier(TRACE_ID);\n      var location = path.container.openingElement.loc;\n      if (!location) {\n        // the element was generated and doesn't have location information\n        return;\n      }\n\n      var attributes = path.container.openingElement.attributes;\n      for (var i = 0; i < attributes.length; i++) {\n        var name = attributes[i].name;\n        if (name && name.name === TRACE_ID) {\n          // The __source attibute already exists\n          return;\n        }\n      }\n\n      if (!state.fileNameIdentifier) {\n        var fileName = state.file.log.filename !== \"unknown\" ? state.file.log.filename : null;\n\n        var fileNameIdentifier = path.scope.generateUidIdentifier(FILE_NAME_VAR);\n        path.hub.file.scope.push({ id: fileNameIdentifier, init: t.stringLiteral(fileName) });\n        state.fileNameIdentifier = fileNameIdentifier;\n      }\n\n      var trace = makeTrace(state.fileNameIdentifier, location.start.line);\n      attributes.push(t.jSXAttribute(id, t.jSXExpressionContainer(trace)));\n    }\n  };\n\n  return {\n    visitor: visitor\n  };\n};\n\n/**\n* This adds {fileName, lineNumber} annotations to React component definitions\n* and to jsx tag literals.\n*\n*\n* == JSX Literals ==\n*\n* <sometag />\n*\n* becomes:\n*\n* var __jsxFileName = 'this/file.js';\n* <sometag __source={{fileName: __jsxFileName, lineNumber: 10}}/>\n*/\n\nvar TRACE_ID = \"__source\";\nvar FILE_NAME_VAR = \"_jsxFileName\";\n\n/*istanbul ignore next*/module.exports = exports[\"default\"];"]}